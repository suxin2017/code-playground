(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[2],{386:function(e,t,n){e.exports={header:"CoreEditor_header__2wdbN",editor:"CoreEditor_editor__3dPuI"}},396:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=396},432:function(e,t,n){},433:function(e,t,n){},530:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(112),s=n.n(c),i=(n(432),n(22)),o=n(21),u=n(123),l=(n(433),n(12)),d=n.n(l),p=n(133),f=n(146),b=n(409),j=n(386),h=n.n(j),v=n(55);function x(e){var t=e.value,n=e.initValue,a=e.language,c=r.useContext(ce),s=r.useRef(null),i=r.useRef();return r.useEffect((function(){if(s.current&&!i.current){var t=f.editor.createModel(n,a,f.Uri.parse("file:///main.".concat("typescript"===a?"tsx":a)));i.current=f.editor.create(s.current,{language:a,automaticLayout:!0,fontSize:16,lineNumbers:"off",minimap:{enabled:!1},model:t}),i.current.onDidChangeModelContent(Object(b.debounce)((function(t){var n;null===e||void 0===e||null===(n=e.onChange)||void 0===n||n.call(e,i.current)}),2e3))}}),[]),r.useEffect((function(){var e,n;t&&c.coreState.once&&(null===(e=i.current)||void 0===e||null===(n=e.getModel())||void 0===n||n.setValue(t))}),[c.coreState.once]),Object(v.jsxs)("div",{className:h.a.editor,children:[Object(v.jsx)("div",{className:h.a.header,children:Object(v.jsx)("span",{children:a})}),Object(v.jsx)("div",{ref:s,style:{width:"100%",height:"calc(100% - 24px)"}})]})}n.e(76).then(n.t.bind(null,612,3)).then((function(e){f.editor.defineTheme("N",e),f.editor.setTheme("N")}));var O=n(0),y=n(1),g=function(e,t){return"https://ofcncog2cu-dsn.algolia.net/1/indexes/npm-search/".concat(e,"?").concat(t?"attributes=".concat(null===t||void 0===t?void 0:t.join(",")):"","&x-algolia-agent=Algolia%20for%20vanilla%20JavaScript%20(lite)%203.27.1&x-algolia-application-id=OFCNCOG2CU&x-algolia-api-key=f54e21fa3a2a0160595bb058179bfb1e")},m=function(e,t,n){return"https://cdn.jsdelivr.net/npm/".concat(e).concat(t?"@"+t:"").concat(n?(null===n||void 0===n?void 0:n.startsWith("/"))?n:"/"+n:"")};function w(e){return k.apply(this,arguments)}function k(){return(k=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.text();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t,n){return J.apply(this,arguments)}function J(){return(J=Object(p.a)(d.a.mark((function e(t,n,r){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(m(t,n,r));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return N.apply(this,arguments)}function N(){return(N=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(g(t,["types"]));case 2:return n=e.sent,e.abrupt("return",n.types);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=[],_=f.languages.typescript.typescriptDefaults,T=function(e,t){return"node_modules/".concat(e,"/").concat(t)},P=function(e,t){var n,r=new Set;if(e.indexOf("reference path")>0)for(var a=/<reference path="(.*)" \/>/gm;null!==(n=a.exec(e));){var c=n[1];c&&(console.log(c,t),r.add(c.startsWith(".")?c:"./"+c))}return Array.from(r)},R=function(e,t){return function(e,t){if(!e)return t;var n=e.split("/"),r=t.split("/");n.pop();for(var a=0;a<r.length;a++)"."!=r[a]&&(".."==r[a]?n.pop():n.push(r[a]));return n.join("/")}(t,e)},I=function(e){for(var t,n=/(const|let|var)(.|\n)*? require\(('|")(.*)('|")\);?$/gm,r=/(import|export)((?!from)(?!require)(.|\n))*?(from|require\()\s?('|")(.*)('|")\)?;?$/gm,a=/import\s+?\(?('|")(.*)('|")\)?;?/gm,c=new Set;null!==(t=r.exec(e));)t[6]&&c.add(t[6]);for(;null!==(t=n.exec(e));)t[5]&&c.add(t[5]);for(;null!==(t=a.exec(e));)t[2]&&c.add(t[2]);return Array.from(c)};function M(e,t){console.log("\u6dfb\u52a0\u7c7b\u578b",t),_.addExtraLib(e,t);var n=f.Uri.file(t);null===f.editor.getModel(n)&&f.editor.createModel(e,"typescript",n)}var F=function(){function e(t,n,r){Object(O.a)(this,e),this.type=void 0,this.name=void 0,this.version=void 0,this.packageJson=void 0,this.name=t,this.type=n,this.version=r}return Object(y.a)(e,[{key:"loadTypeDefined",value:function(){var t=Object(p.a)(d.a.mark((function t(){var n,r,a,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("definitely-typed"!==(null===(n=this.type)||void 0===n?void 0:n.ts)){t.next=7;break}return r=e.createLib(this.type.definitelyTyped),t.next=4,r;case 4:t.sent.loadTypeDefined(),t.next=16;break;case 7:return t.next=9,this.getPackageJson();case 9:return a=t.sent,c=JSON.parse(a),!(s=c.typing||c.typings||c.types)&&"string"===typeof c.main&&c.main.indexOf(".js")>0&&(s=c.main.replace(/js$/,"d.ts")),s&&"index"!==s||(s="index.d.ts"),t.next=16,this.loadDepTsDefined(s);case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getFile",value:function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(this.name,this.version,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadDepTsDefined",value:function(){var t=Object(p.a)(d.a.mark((function t(n){var r,a,c,s,i=this;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.getLibPath(n),-1===E.indexOf(r)){t.next=3;break}return t.abrupt("return");case 3:return E.push(r),t.next=6,this.getFile(n);case 6:a=t.sent,M(this.getLibContext(a),r),c=I(a),s=P(a,n),c.concat(s).map(function(){var t=Object(p.a)(d.a.mark((function t(r){var a,c,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.startsWith(".")){t.next=9;break}return a=R(r,n),console.log(a),c=a.endsWith(".d.ts")?a:a+".d.ts",t.next=7,i.loadDepTsDefined(c);case 7:t.next=13;break;case 9:return s=e.createLib(r),t.next=12,s;case 12:t.sent.loadTypeDefined();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getLibPath",value:function(e){return this.name.startsWith("@types")?function(e,t){return"file:///".concat(T(e,t))}(this.name,e):T(this.name,e)}},{key:"getLibContext",value:function(e){return this.name.startsWith("@types"),e}},{key:"getPackageJson",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.packageJson){e.next=6;break}return e.next=3,S(this.name,this.version,"package.json");case 3:t=e.sent,this.packageJson=t,M(t,this.getLibPath("package.json"));case 6:return e.abrupt("return",this.packageJson);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"createLib",value:function(){var t=Object(p.a)(d.a.mark((function t(n,r){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={ts:"included"},n.startsWith("@types")){t.next=5;break}return t.next=4,D(n);case 4:a=t.sent;case 5:return t.abrupt("return",new e(n,a,r));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),U=[];function W(e){var t=r.useContext(ce);r.useContext(se).library;return r.useEffect((function(){f.languages.typescript.typescriptDefaults.setCompilerOptions({allowJs:!0,jsx:f.languages.typescript.JsxEmit.React,esModuleInterop:!0,target:f.languages.typescript.ScriptTarget.ES2016,allowNonTsExtensions:!0,moduleResolution:f.languages.typescript.ModuleResolutionKind.NodeJs,module:f.languages.typescript.ModuleKind.CommonJS,typeRoots:["node_modules/@types"],allowSyntheticDefaultImports:!0})}),[]),r.useEffect((function(){if(e.jsLib){var t=e.jsLib.reduce((function(e,t){return[].concat(Object(o.a)(e),[Object.keys(t)[0]])}),[]);t.forEach(function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==U.indexOf(t)){e.next=5;break}return e.next=3,F.createLib(t);case 3:e.sent.loadTypeDefined(),console.log("\u52a0\u8f7d",t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=t}}),[e.jsLib]),Object(v.jsx)(x,{initValue:"",value:t.coreState.js,language:"typescript",onChange:function(e){var n,r=e.getValue();null===t||void 0===t||null===(n=t.dispatch)||void 0===n||n.call(t,{type:"js",code:r})}})}var V=n(410),A=/import\s*([{\sa-z_A-Z0-9\s,}]*?)\s+from\s*(["'a-zA-Z0-9\-'"]*);?/g;function G(e){var t=r.useState(""),n=Object(i.a)(t,2),a=n[0],c=n[1],s=r.useContext(ce),o=r.useContext(se).library;return r.useEffect((function(){var t=function(e){try{var t,n=Object(V.transform)(e,{presets:["react"]}),r=0,a=null===(t=n.code)||void 0===t?void 0:t.replace(A,(function(e,t,n){return["const module_".concat(r+=1," = await System.import(").concat(n,");"),"console.log(module_".concat(r,")"),"const ".concat(t," = module_").concat(r,".default ? module_").concat(r,".default : module_").concat(r)].join("\n")}));return console.log("result",a),a}catch(c){console.log(c)}}(s.coreState.js),n=s.coreState.html,r=e.jsLib.reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),t)}),{});console.log(r,"libs");var a={imports:Object(u.a)({},r)},i="\n    <html>\n        <head>\n        ".concat(e.cssLib.map((function(e){return'<link rel="stylesheet" href="'.concat(e,'" crossorigin="anonymous"></link>')})),"\n        \x3c!-- \u52a0\u8f7dsystemjs --\x3e\n            ").concat('<script src="https://cdn.jsdelivr.net/npm/systemjs@6.8.3/dist/system.min.js"><\/script>',"\n\n       \n       \n         \n\n\n        \n    \n    </head>\n    <body>\n        <style>\n        ").concat(s.coreState.css,"\n        </style>\n       ").concat(n,"\n\n       \x3c!-- \u52a0\u8f7d\u4f9d\u8d56 --\x3e\n       ").concat(e.global?Object.keys(r).map((function(e){return console.log(r[e],"iii"),'<script type="text/javascript" src="'.concat(r[e],'" crossorigin="anonymous"><\/script>')})).join("\n"):' <script type="systemjs-importmap">\n             '.concat(JSON.stringify(a),"\n             <\/script>"),"\n       <script>\n       // core runner\n           async function run() {\n               ").concat(t,"\n           }\n           run();\n       <\/script>\n    </body>\n    \n    \n    </html>"),o=URL.createObjectURL(new Blob([i],{type:"text/html"}));return c(o),function(){URL.revokeObjectURL(o)}}),[s,o,e.cssLib]),Object(v.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(v.jsx)("iframe",{src:a,style:{width:"100%",height:"100%"}})})}function q(e){var t=r.useContext(ce);return Object(v.jsx)(x,{initValue:"",value:t.coreState.css,language:"css",onChange:function(e){var n=e.getValue();t.dispatch({type:"css",code:n})}})}n(501);var z=n(387),B=n.n(z);function $(e){var t=r.useContext(ce);return Object(v.jsx)(x,{initValue:"",value:t.coreState.html,language:"html",onChange:function(e){var n=e.getValue();t.dispatch({type:"html",code:n})}})}var K=n(244),Z=n(41),H=n(543),Q=n(542),X=n(541),Y=n(234),ee=n(544);function te(e){var t=r.useState(""),n=Object(i.a)(t,2),a=n[0],c=n[1],s=r.useState(""),u=Object(i.a)(s,2),l=u[0],d=u[1],p=r.useState(""),f=Object(i.a)(p,2),b=f[0],j=f[1],h=(r.useContext(se).dispatch,e.type),x=void 0===h?"css":h;return Object(v.jsx)(H.a,{visible:e.visible,title:{js:"js \u8bbe\u7f6e",css:"css \u8bbe\u7f6e",html:"html \u8bbe\u7f6e"}[x],footer:null,onCancel:function(){var t;null===e||void 0===e||null===(t=e.onCancel)||void 0===t||t.call(e)},children:Object(v.jsxs)("div",{style:{color:"#fff"},children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:Object(v.jsx)(Q.a,{placeholder:"\u6837\u5f0f",value:a,onChange:function(e){return c(e.target.value)}})}),Object(v.jsx)("div",{children:Object(v.jsx)(X.b,{dataSource:e.cssLib,renderItem:function(t){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(X.b.Item,{children:t}),Object(v.jsx)(Y.a,{onClick:function(){var n=e.cssLib.indexOf(t);e.cssLib.splice(n,1),e.setCssLib(Object(o.a)(e.cssLib))},children:"\u5220\u9664"})]})}})}),Object(v.jsx)(Y.a,{onClick:function(){e.setCssLib([].concat(Object(o.a)(e.cssLib),[a]))},children:"\u6dfb\u52a0\u6837\u5f0f"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:"\u6dfb\u52a0\u4f9d\u8d56"}),Object(v.jsxs)(ee.a.Group,{value:e.global,onChange:function(t){var n=t.target.value;console.log("v",n),e.setGlobal(n)},children:[Object(v.jsx)(ee.a,{value:!0,children:"\b\u5168\u5c40\u5f15\u5165"}),Object(v.jsx)(ee.a,{value:!1,children:"\u6a21\u5757\u5f15\u5165"})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(Q.a,{placeholder:"\u6a21\u5757\u540d",value:l,onChange:function(e){return d(e.target.value)}}),Object(v.jsx)(Q.a,{placeholder:"\u6a21\u5757umd\u8def\u5f84",value:b,onChange:function(e){return j(e.target.value)}})]}),Object(v.jsx)(X.b,{dataSource:e.jsLib,renderItem:function(t){var n=Object.keys(t)[0];return Object(v.jsxs)(X.b.Item,{children:[n,":",t[n],Object(v.jsx)(Y.a,{onClick:function(){var t=e.jsLib.findIndex((function(e){return null!=e[n]}));e.jsLib.splice(t,1),e.setJsLib(Object(o.a)(e.jsLib))},children:"\u5220\u9664"})]})}}),Object(v.jsx)(Y.a,{onClick:function(){e.setJsLib([].concat(Object(o.a)(e.jsLib),[Object(Z.a)({},l,b)]))},children:"\u6dfb\u52a0\u4f9d\u8d56"})]})]})})}n(527);var ne=Object(z.WidthProvider)(B.a),re=function(e,t){var n=e;switch(t.type){case"css":n=Object(u.a)(Object(u.a)({},e),{},{css:t.code});break;case"js":n=Object(u.a)(Object(u.a)({},e),{},{js:t.code});break;case"html":n=Object(u.a)(Object(u.a)({},e),{},{html:t.code});break;default:t.codeState&&(n=t.codeState)}return window.history.pushState(null,"","?"+Object(K.stringify)(Object(u.a)(Object(u.a)({},ie()),{},{p:n}))),n},ae={js:"",css:"",html:"",once:!1},ce=a.a.createContext({coreState:ae,dispatch:function(){}}),se=a.a.createContext({library:[],dispatch:function(){}});function ie(){var e=window.location.search;return Object(K.parse)(e.slice(1))}var oe=function(){var e=a.a.useReducer(re,ae),t=Object(i.a)(e,2),n=t[0],r=t[1],c=a.a.useState([]),s=Object(i.a)(c,2),o=s[0],l=s[1],d=a.a.useState([]),p=Object(i.a)(d,2),f=p[0],b=p[1],j=a.a.useState(!1),h=Object(i.a)(j,2),x=h[0],O=h[1],y=a.a.useState(!1),g=Object(i.a)(y,2),m=g[0],w=g[1],k=a.a.useState([{i:"css",x:0,y:0,w:4,h:6,static:!0},{i:"js",x:0,y:0,w:4,h:6,static:!0},{i:"html",x:0,y:6,w:4,h:6,static:!0},{i:"preview",x:4,y:0,w:8,h:18,static:!0}]),L=Object(i.a)(k,2),C=L[0];return L[1],a.a.useEffect((function(){var e=window.location.search;if(e)try{var t=Object(K.parse)(e.slice(1));r({type:"all",code:"",codeState:Object(u.a)(Object(u.a)({},t.p),{},{once:!0})}),console.log(t),t.cssLib&&l(t.cssLib),t.jsLib&&b(t.jsLib),null!=t.global&&("false"===t.global?O(!1):O(!0))}catch(n){console.error("json",n)}}),[]),Object(v.jsxs)(ce.Provider,{value:{coreState:n,dispatch:r},children:[Object(v.jsxs)("header",{className:"playground-header",children:[Object(v.jsx)("div",{className:"playground-header-title",children:"Code Playground"}),Object(v.jsx)("span",{className:"setting",onClick:function(){w(!0)}})]}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(te,{visible:m,onCancel:function(){w(!1)},cssLib:o,setCssLib:function(e){window.history.pushState(null,"","?"+Object(K.stringify)(Object(u.a)(Object(u.a)({},ie()),{},{cssLib:e}))),l(e)},global:x,setGlobal:function(e){window.history.pushState(null,"","?"+Object(K.stringify)(Object(u.a)(Object(u.a)({},ie()),{},{global:e}))),O(e)},jsLib:f,setJsLib:function(e){window.history.pushState(null,"","?"+Object(K.stringify)(Object(u.a)(Object(u.a)({},ie()),{},{jsLib:e}))),b(e)}}),Object(v.jsx)("div",{style:{flexGrow:1},children:Object(v.jsxs)(ne,{layout:C,className:"layout",margin:[10,20],cols:12,rowHeight:30,width:window.innerWidth,children:[Object(v.jsx)("div",{children:Object(v.jsx)($,{})},"html"),Object(v.jsx)("div",{children:Object(v.jsx)(q,{})},"css"),Object(v.jsx)("div",{children:Object(v.jsx)(W,{jsLib:f})},"js"),Object(v.jsx)("div",{style:{padding:"10px 0 0 0"},children:Object(v.jsx)(G,{cssLib:o,jsLib:f,global:x})},"preview")]})})]})]})},ue=function(e){e&&e instanceof Function&&n.e(75).then(n.bind(null,613)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(oe,{})}),document.getElementById("root")),ue()}},[[530,3,4]]]);
//# sourceMappingURL=main.5718fb73.chunk.js.map